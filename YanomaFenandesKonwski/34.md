Esse deu muito trabalho, então lá vai, primeiro de cara já pensei que poderia ser busca binária, e aí lá fui eu. No primeiro caso, temos que caso não apareça nenhum target na lista, temos que retornar -1, logo já coloque primeiro e ultimo como -1. Depois fui para busca binaria, o que deu um grande trabalho, pois deveria encontrar uma lógica de forma que eu retornasse a primeira aparição e a ultima, então pensei no que. Quando eu colocar direito = meio -1, vou encontrar nesses caso sempre de forma que esquerdo e direito estão no mesmo lugar, sendo esse lugar a primeira aparição do target, uma vez que o meio do loop anterior já encontrou o target, e aí o meio vai depois no próximo loop pra onde está esse direito e esquerdo que é onde apareceu a primeira vez o target, e após isso para encerrar o loop eu vou jogando a direita pra antes da esquerda que é feito pelo direito = meio -1.
Já no próximo ponto que o do ultimo, lembra que eu por padrão já encontro o ultimo quando faço a busca binaria. Mas aí eu tenho que encontrar uma forma do direito ser menor que o esquerdo por isso eu jogo o esquerdo pra depois do meio, ou seja não tem como fazer mais alterações de onde o meio tá pq já passou do indice de onde foi sua primeira aparição, aí depois enquanto o meio está diminuindo com direito = meio-1 o esquerdo esta aumentando até passar e encerrar o loop com esquerdo sendo igual a meio+1.